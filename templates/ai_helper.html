{% extends "layout.html" %} <!-- Step 1: Extend the layout -->

<!-- Step 2: Change title -->
{% block title %}
    AI Assistant
{% endblock %}

<!-- Step 3: Put all content inside this block -->
{% block content %}
<main class="chat-container">

    <!-- 1. Question form -->
    <section class="form-box animate-on-load">
        
        <h2>Ask Your Question</h2>
        <p style="margin-bottom: 25px; color: #555;">Ask anything about farming, government schemes, or crop diseases.</p>
        
        <form method="POST" action="/ai_helper">
            <div class="form-group">
                <label for="user_question">Your Question:</label>
                <textarea id="user_question" name="user_question" rows="4" required></textarea>
            </div>
            <button type="submit" class="btn" id="ask-btn">Get Answer</button>
        </form>
    </section>

    <!-- 2. AI's answer (if it exists) -->
    {% if answer %}
    <div class="answer-box animate-on-load">
        <h3>AI's Answer:</h3>
        <!-- 'safe' filter allows rendering HTML (like <br>) -->
        <!-- The AI answer will come from app.py (it should be set to English) -->
        <p>{{ answer | safe }}</p> 
    </div>
    {% endif %}

</main>
{% endblock %}


<!-- Step 4: Put this page's script here -->
{% block scripts %}
    <script>
        // To change the 'Ask' button to 'Loading...'
        document.querySelector('form').addEventListener('submit', function() {
            var btn = document.getElementById('ask-btn');
            btn.disabled = true;
            btn.innerText = 'Thinking... (Loading...)';
        });
    </script>
{% endblock %}